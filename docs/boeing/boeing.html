<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Khushant Khurana - Analysis of Boeing 747-800’s Aerodynamics Using First Principles​</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-R5DWCF4Z6W"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-R5DWCF4Z6W', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Khushant Khurana</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../resume_khurana.pdf" rel="" target="">
 <span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../transcript.pdf" rel="" target="">
 <span class="menu-text">Transcript</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Analysis of Boeing 747-800’s Aerodynamics Using First Principles​</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><strong>Home</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Introduction</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text"><strong>Past internships</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">• Defense Science and Technology Graduate Intern @ Lawrence National Lab</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">• Aviation Systems Engineer Intern @ Garmin</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../oshkosh_poster.pdf" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Controls Intern @ Oshkosh Corporation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text"><strong>Past research</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../traj_opt/traj_opt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Graduate Student Researcher @ Dynamics &amp; Control Lab</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text"><strong>Projects</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../gnc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Guidance Navigation &amp; Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dynamics_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Dynamics &amp; Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Simulation &amp; Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fabrication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">• Mechanical Design &amp; Fabrication</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#a-brief-synopsis" id="toc-a-brief-synopsis" class="nav-link active" data-scroll-target="#a-brief-synopsis">A Brief Synopsis</a></li>
  <li><a href="#thin-airfoil-theory" id="toc-thin-airfoil-theory" class="nav-link" data-scroll-target="#thin-airfoil-theory">1. Thin Airfoil Theory</a></li>
  <li><a href="#finite-wing-theory" id="toc-finite-wing-theory" class="nav-link" data-scroll-target="#finite-wing-theory">2. Finite Wing Theory</a></li>
  <li><a href="#viscous-modelling" id="toc-viscous-modelling" class="nav-link" data-scroll-target="#viscous-modelling">3. Viscous Modelling</a></li>
  <li><a href="#xflr5-analysis" id="toc-xflr5-analysis" class="nav-link" data-scroll-target="#xflr5-analysis">4. XFLR5 Analysis</a></li>
  <li><a href="#supporting-files" id="toc-supporting-files" class="nav-link" data-scroll-target="#supporting-files">5. Supporting Files</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">



<div class="quarto-about-jolla column-body">
  <img src="bacxxx.png" class="about-image
  rectangle " style="width: 30em;">
 <header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis of Boeing 747-800’s Aerodynamics Using First Principles​</h1>
</div>
<div class="quarto-title-meta">
  </div>
</header><div id="heading">
</div>  
</div>

<section id="a-brief-synopsis" class="level2">
<h2 data-anchor-id="a-brief-synopsis">A Brief Synopsis</h2>
<p>Under this project, the aerodynamic features such as lift and drag coefficients, downwash effects, and viscous models are determined using first principles. To begin, the coordinates of the BACXXX airfoil are derived from <a href="http://airfoiltools.com/airfoil/details?airfoil=bacxxx-il">airfoil tools</a>. Following this, 2D method of thin airfoil theory is used to get the section lift coefficient. Since the 2D models assume inviscid flow, no drag can be determined from them. Accordingly, the finite wing of the Boeing 747 is analysed using Finite Wing Theory and Prandtl Lifting Line Theory to understand the downwash effects and induced drag. Viscous models are added on top of this to improve the accuracy of the calculations and finally a study in XFLR5 is conducted. For the fundamental analysis, python code is written from scratch which can be found <a href="https://github.com/khushant2001/Boeing-747-8-Aero-Analysis">here</a>.</p>
</section>
<section id="thin-airfoil-theory" class="level2">
<h2 data-anchor-id="thin-airfoil-theory">1. Thin Airfoil Theory</h2>
<p>Thin airfoil theory assumes that the airfoil has a small thickness compared to its chord length (&lt;12%). This allows the airflow over the airfoil to be treated as two-dimensional, simplifying the analysis. Since the theory utilizes potential flow theory, it assumes the flow to be irrotational and inviscid. Moreover, the theory assumes a vortex sheet on the camber line which creates circulation and consequently lift, as explained by the Kutta Joukowski theorem.</p>
<p><span class="math display">\[\begin{equation}
    L' = \rho V_\text{inf} \Gamma
    \label{eq:kutta}
\end{equation}\]</span></p>
<p>According to thin airfoil theory, the lift force and moments applied to a 2D airfoil can be determined using the change in camber line where <span class="math inline">\(\sigma\)</span> is the vorticity strength over the camber line. In order to determine the camber line function of the BACXXX airfoil, 4 digit NACA convention is used where ‘m’ = maximum camber and ‘p’ = location of maximum camber.</p>
<p><span class="math display">\[\begin{equation}
    \frac{1}{2\pi}\int_{0}^{c} \frac{\sigma(x_0)}{(x-x_0)} \, dx_0 = V_\text{inf} (\sin(\alpha) -\frac{dz}{dx} \cos(\alpha)
    \label{eq:thin airfoil}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{align}
    \label{eq:camberline}
    yc = \frac{m}{p^2}(2px-x^2), 0 \leq x \leq p.\\
    yc = \frac{m}{(1-p)^2}((1+2p)+2px-x^2), p \leq x \leq 1
\end{align}\]</span></p>
<p>In order to integrate the vorticity strength function around the chord, Fourier coefficients are used to express the vorticity strength function as a <span class="math inline">\(f(\theta)\)</span> as . The fourier coefficients are labelled as <span class="math inline">\(A_n\)</span> and are determined using equations.</p>
<p><span class="math display">\[\begin{equation}
    \sigma(\theta) = 2V_\text{inf}(A_0 \frac{1+\cos(\theta)}{\sin(\theta)} + \sum_{i=1}^{n}A_n \sin(n\theta))
    \label{eq:fourier thin}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{align}
    \label{eq:fourier}
    A_0 = \alpha - \int_{0}^{\pi} \frac{dz}{dx}d\phi\\
    A_n = \frac{2}{\pi}\int_{0}^{\pi}\frac{dz}{dx}(cos(n\phi)d\phi)
\end{align}\]</span></p>
<p>The coefficients are solved for cruise speed and the coefficient of lift and moment at the tip are determined as shown in . The slope of the lift coefficient vs angle of attack is determined to be 6.28 which is approximately <span class="math inline">\(2\pi\)</span> and the angle of attack at <span class="math inline">\(C_L\)</span> = 0 is -1.31 . At cruise speed, the angel of attack is determined to be 0.5 degrees to generate lift force equaling the maximum payload of the aircraft.</p>
<p><img src="thin_cl.png" class="img-fluid" width="450"> <img src="thin_steady_flight.png" class="img-fluid" width="450"></p>
</section>
<section id="finite-wing-theory" class="level2">
<h2 data-anchor-id="finite-wing-theory">2. Finite Wing Theory</h2>
<p>Since thin airfoil theory assumes a 2D profile and an infinite wing, it neglects effect of downwash. Downwash is the movement of the air from high pressure region underneath the wing to low pressure region top. Accordingly, there is no lift produced at the edges which results in a non-uniform vorticity distribution unlike the thin airfoil theory. To solve this problem, a parabolic distribution of vortex strength is considered which is 0 at the ends and peaks in the middle. The effect of downwash reduces the angle of attack.</p>
<p><span class="math display">\[\begin{equation}
    \label{eq:aoa effective}
    \alpha_\text{effective} = \alpha - \alpha_\text{induced}
\end{equation}\]</span></p>
<p>It was determined that the lift coefficient varies with angle of attack using the factor <span class="math inline">\(2\pi\)</span>. The magnitude of downwash. Putting this in context with the vorticity distrubtion function like before, the fundamental equation of finite wing theory is derived.</p>
<p><span class="math display">\[\begin{equation}
    \label{Eq:downwash}
    w(y_0) = \int_{-winspan/2}^{wingspan/2}\frac{\frac{d\Gamma}{dy}}{4\pi(y-y_0)} dy
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
    \label{eq:finite main}
    \frac{\Gamma(y_0)}{\pi V_\text{inf} c(y_0} = \alpha(y_0) - \alpha_\text{L-0}(y_0) + \frac{1}{4\pi V_\text{inf}}\int_{-wingspan/2}^{wingspan/2}\frac{\frac{d\Gamma}{dy}}{4\pi(y-y_0)} dy
\end{equation}\]</span></p>
<p>To solve the equation, the vorticity strength across the wing is assumed to be Fourier sum. The Fourier coefficients <span class="math inline">\(A_n\)</span> are solved using linear system of equations: Ax = B. Using these coefficients, the lift and induced drag are determined.</p>
<p><span class="math display">\[\begin{equation}
    \label{eq:finite fourier}
    \Gamma(\theta) = 2bV_\text{inf}\sum_{i=1}^{n} A_n sin(n\theta)
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
    \label{eq:finite fourier main}
    \frac{2b}{\pi c(\theta)}\sum_{i=1}^{n} A_n sin(n\theta) + \sum_{i=1}^{n} nA_n \frac{sin(n\theta)}{sin(\theta)} = \alpha(\theta) - \alpha_\text{L-0}(\theta).
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{align}
    \label{eq:finite lift}
    C_L = A_1 \pi (Aspect Ratio)\\
    C_D = \frac{C_L^2}{\pi(Aspect Ratio)}(1+\sigma)
\end{align}\]</span></p>
<p>The linear system of equations is solved in Python using 100 coefficients to generate precise values. The corresponding Reynolds number for this analysis is 2.4e8. The lift coefficient, induced drag coefficient, and the relations of the two. The modified lift coefficient, accounting for induced drag, has less slope than the 2D model which makes sense because the lift force is not uniform anymore. In other words, the downwash results in loss of lift force at the edges which introduces an induced angle of attack.</p>
<p><img src="finite_cl.png" class="img-fluid" width="450"> <img src="finite_cd.png" class="img-fluid" width="450"> <img src="finite_cl_cd.png" class="img-fluid" width="450"> <img src="finite_cl_cd_alpha.png" class="img-fluid" width="450"></p>
</section>
<section id="viscous-modelling" class="level2">
<h2 data-anchor-id="viscous-modelling">3. Viscous Modelling</h2>
<p>Viscous effects in aerodynamics arise from skin friction due to boundary layers. Assuming no slip condition, the flow has 0 velocity at the contact surface which induces shear stress and gives rise to drag. Boundary layers can be classified as laminar and turbulent, based on the local Reynolds number. If the Reynolds number is greater than 3e5, critical Reynolds Number, the flow is considered to be turbulent.</p>
<p>The determination of skin drag on the wings of Boeing 747-800 is done using strip theory: the wing is split into multiple sections. Both laminar and turbulent effects are considered while analyzing individual strips and the shear force is determined. To make things easy, flat plate model is used to determine the drag force.</p>
<p><span class="math display">\[\begin{align}
    \label{eq:drag}
    Drag_\text{Laminar} = 0.664 \rho V_\text{inf}^2 L (Re_L)^.5\\
    Drag_\text{Turbulent} = \frac{0.036 \rho V_\text{inf}^2 L}{Re^.2}
\end{align}\]</span> Since the incoming flow transitions from laminar to turbulent, the total drag on the section is determined using Prandtl Relation. The Reynolds number used for the transition is 3e5</p>
<p><span class="math display">\[\begin{equation}
    \label{eq:prandtl}
    Drag_\text{Total} = Drag_\text{100\% Turbulent} - Drag_\text{Turbulent Where Laminar} + Drag_\text{Laminar}
\end{equation}\]</span></p>
<p>To calculate the total skin drag, 200000 sections are used and the final drag force is determined to be 605 kN and the coefficient of drag is 0.03 at steady state flight. The viscous drag is lies close to the induced drag for smaller angle of attacks (range of -10 to 10 degrees). However, with higher angle of attack, the induced drag coefficient increases.</p>
<p>To analyze the viscous drag on the body itself, coefficient of drag over fundamental shapes is taken from standard aero textbook. Accordingly, the fuselage is considered as a long cylinder and the nose is considered as a hollow hemisphere. The corresponding coefficients are shown in . The dimensions used for both shapes. Like the wing analysis, steady level flight is assumed with conditions . <span class="math display">\[\begin{align}
    \label{eq:cd}
    C\_D_\text{Fuselage} = 0.86 \\
    C\_D_\text{Nose} = 0.38
\end{align}\]</span></p>
<p>Using the basic drag calculation, the overall drag is determined to be 1620 kN which seems to be a lot. However, if the entire body is considered as 1 shape - a stretched streamlined body - the coefficient of drag decreases to 0.04. Doing the same calculations, the total drag over the body equals to 53 kN which does make more sense.</p>
</section>
<section id="xflr5-analysis" class="level2">
<h2 data-anchor-id="xflr5-analysis">4. XFLR5 Analysis</h2>
<p>The data points from the Airfoil Tools for the BACXXX airfoil are entered into the XFLR5 software to validate the results found using fundamental methods and also determine stall characteristics. Reynolds number at cruise conditions (2.4e8) and angle of attack ranging from -25 to 25 degree are used for analysis.</p>
<p><img src="xfl_cl.png" class="img-fluid" width="450"> <img src="xfl_cd.png" class="img-fluid" width="450"> <img src="xlf_cl_cd.png" class="img-fluid" width="450"> <img src="xfl_cm.png" class="img-fluid" width="450"></p>
</section>
<section id="supporting-files" class="level2">
<h2 data-anchor-id="supporting-files">5. Supporting Files</h2>
<p>The python code, XFLR 5 model, and the academic paper used can be found <a href="https://github.com/khushant2001/Boeing-747-8-Aero-Analysis">here</a></p>



</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2023, Khushant Khurana</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>